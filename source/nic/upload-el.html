<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VELAB: Media Capture and Upload Form</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <meta name="description" content="At the Virtual Environments Lab, we support European efforts in architectural heritage preservation and urban transformation through advanced digital solutions. Our mission includes developing tools to combat heritage decay, enhancing urban resilience, and promoting education in historic digital transitions. We focus on immersive visualization, interactive narratives, and creating digital twins to integrate tangible and intangible heritage.">
    <meta property="og:title" content="Virtual Environments Lab â€“ Preserving European Architectural Heritage">
    <meta property="og:description" content="Supporting European urban heritage through advanced digital tools aimed at safeguarding, understanding, and transforming historic sites. Discover our innovative approaches to architectural preservation and education.">
    <meta property="og:image" content="/images/image5.jpg">
    <meta property="og:url" content="https://velab.cloud">
    <meta property="og:type" content="website">
</head>
<body>
    <header><h1 class="return"><a href="/nic/el/">VELAB: Î”Î¹ÎµÎ¸Î½Î­Ï‚ Î‘ÎµÏÎ¿Î´ÏÏŒÎ¼Î¹Î¿ Î›ÎµÏ…ÎºÏ‰ÏƒÎ¯Î±Ï‚ VE</a></h1></header>
    <div id="loadingOverlay" class="hidden loadingOverlay"> 
        <div class="loading-spinner"></div>
    </div>
    <main>
        <span>Î¦ÎŸÎ¡ÎœÎ‘ ÎšÎ‘Î¤Î‘Î˜Î•Î£Î—Î£ Î Î›Î—Î¡ÎŸÎ¦ÎŸÎ¡Î™Î©Î</span>
       <article class="form-upload">
           <div id="form-background"></div>
           <form id="mediaForm" enctype="multipart/form-data">
               <!-- Subject -->
               <div class="form-group">
                   <label for="subject">Î˜Î­Î¼Î±*</label>
                   <input type="text" id="subject" name="subject" required placeholder="Î— Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î® Ï„Î¿Ï… Î¸Î­Î¼Î±Ï„Î¿Ï‚ Î¼Î±Ï‚ Î²Î¿Î·Î¸Î¬ÎµÎ¹ Î½Î± Î¿ÏÎ³Î±Î½ÏÏƒÎ¿Ï…Î¼Îµ Ï„Î¹Ï‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚.">
               </div>
               <!-- Email (Required) -->
               <div class="form-group">
                   <label for="email">Email*</label>
                   <input type="email" id="email" name="email" required placeholder="Î— Î·Î»ÎµÎºÏ„ÏÎ¿Î½Î¹ÎºÎ® ÏƒÎ±Ï‚ Î´Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· Î¸Î± Î¼Î±Ï‚ Î²Î¿Î·Î¸Î®ÏƒÎµÎ¹ Î½Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎ¿Ï…Î¼Îµ Î¼Î±Î¶Î¯ ÏƒÎ±Ï‚.">
               </div>

               <!-- Text -->
               <div class="form-group">
                   <label for="text">Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®</label><br>
                   <textarea id="text" name="text" placeholder="ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Ï„Î¹Ï‚ Î±Î½Î±Î¼Î½Î®ÏƒÎµÎ¹Ï‚, Ï„Î¹Ï‚ Î¹ÏƒÏ„Î¿ÏÎ¯ÎµÏ‚ Î® Ï„Î± ÏƒÏ‡ÏŒÎ»Î¹Î¬ ÏƒÎ±Ï‚ ÎµÎ´Ï. Î•Î¬Î½ ÎµÎ¯Î½Î±Î¹ Î¼ÎµÎ³Î¬Î»Î¿, Î¼ÎµÏ„Î±Ï†Î¿ÏÏ„ÏÏƒÏ„Îµ Ï„Î¿ ÏƒÏ‡ÎµÏ„Î¹ÎºÏŒ Î­Î³Î³ÏÎ±Ï†Î¿." rows="5"></textarea>
               </div>


                <!-- Rights dropdown -->
                <div class="form-group">
                    <label for="rights">Î†Î´ÎµÎ¹Î± ÎºÎ±Î¹ Î¹Î´Î¹Î¿ÎºÏ„Î·ÏƒÎ¯Î±*</label>
                   <select id="rights" name="rights" onchange="handleRightsChange()" required>
                       <option value="" disabled selected>Î ÏÏ‚ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï‡ÎµÎ¹ÏÎ¹Î¶ÏŒÎ¼Î±ÏƒÏ„Îµ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÏƒÎ±Ï‚;</option>
                       <option value="full_credit">Î”Ï‰ÏÎµÎ¬Î½ Ï‡ÏÎ®ÏƒÎ·, Î¼Îµ Ï€Î»Î®ÏÎ· Î±Î½Î±Ï†Î¿ÏÎ¬ Î¹Î´Î¹Î¿ÎºÏ„Î·ÏƒÎ¯Î±Ï‚</option>
                       <option value="anonymous">Î”Ï‰ÏÎµÎ¬Î½ Ï‡ÏÎ®ÏƒÎ·, Î±Î»Î»Î¬ Î±Î½ÏÎ½Ï…Î¼Î·</option>
                       <option value="conditional_credit">Î§ÏÎ®ÏƒÎ· Ï…Ï€ÏŒ ÏŒÏÎ¿Ï…Ï‚ Î® Ï€Î¯ÏƒÏ„Ï‰ÏƒÎ· Î¹Î´Î¹Î¿ÎºÏ„Î·ÏƒÎ¯Î±Ï‚</option>
                   </select>
                    
                    <!-- Conditional input field -->
                    <div id="conditionalInputs" style="display: none;">
                        <textarea id="contributorInfo" name="contributorInfo" placeholder="Enter your name"></textarea>
                    </div>

                    <!-- Display explanation text based on selection -->
                    <div id="rightsExplanation" style="padding-top: 10px;"></div>
                </div>
                <script>
                    window.addEventListener('DOMContentLoaded', function() {
                    const rightsSelect = document.getElementById('rights');
                    const contributorInfoTextarea = document.getElementById('contributorInfo');

                    const lastSubmittedEmail = localStorage.getItem('lastSubmittedEmail');
                    const lastSelectedRights = localStorage.getItem('lastSelectedRights');
                    const lastContributorInfo = localStorage.getItem('lastContributorInfo');

                    if (lastSelectedRights) {
                        rightsSelect.value = lastSelectedRights;
                        handleRightsChange(); // Trigger the rights change event to show/hide the contributor info field
                
                    }

                    if (lastContributorInfo) {
                        contributorInfoTextarea.value = lastContributorInfo;
                    }
                    });
                </script>

                <script>
                    function handleRightsChange() {
                        var rights = document.getElementById('rights').value;
                        var inputs = document.getElementById('conditionalInputs');
                        var contributorInfo = document.getElementById('contributorInfo');
                        var explanation = document.getElementById('rightsExplanation');
                        
                        // Hide the input and reset explanation text initially
                        inputs.style.display = 'none';
                        explanation.innerHTML = '';  // Clear existing text
                        
                        // Show inputs and update text based on selected rights
                        switch (rights) {
                           case 'full_credit':
                               inputs.style.display = 'block';
                               contributorInfo.placeholder = 'Î¤Î¹ ÏŒÎ½Î¿Î¼Î± Î¸Î± Î¸Î­Î»Î±Ï„Îµ Î½Î± Î±Î½Î±Ï†Î­ÏÎ¿Ï…Î¼Îµ ÏƒÏ„Î· ÏƒÏ…Î½ÎµÎ¹ÏƒÏ†Î¿ÏÎ¬ ÏƒÎ±Ï‚;';
                               explanation.innerHTML = 'Î— Ï€Î¯ÏƒÏ„Ï‰ÏƒÎ· Ï‡ÏÎ®ÏƒÎ·Ï‚ Ï€Î¿Ï… Î´Î¯Î½ÎµÏ„Îµ Î· Î¿Ï€Î¿Î¯Î± Î¸Î± Ï€Î±ÏÎ±Î¼ÎµÎ¯Î½ÎµÎ¹ ÏƒÏ„Î¿ Î±ÏÏ‡ÎµÎ¯Î¿ ÎºÎ±Î¹ ÏŒÏ„Î±Î½ Î±Î½Î±Î´Î¹Î±Î½ÎµÎ¼Î·Î¸ÎµÎ¯. Î‘Ï…Ï„Î® Î±ÎºÎ¿Î»Î¿Ï…Î¸ÎµÎ¯ Ï„Î¿ Ï€ÏÏŒÏ„Ï…Ï€Î¿ <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License (CC BY 4.0)</a>.';
                               break;
                           case 'conditional_credit':
                               inputs.style.display = 'block';
                               contributorInfo.placeholder = 'Î Î¿Î¹ÎµÏ‚ ÎµÎ¯Î½Î±Î¹ Î¿Î¹ Ï€ÏÎ¿Ï„Î¹Î¼Î®ÏƒÎµÎ¹Ï‚ ÏƒÎ±Ï‚ Î³Î¹Î± Ï€Î¯ÏƒÏ„Ï‰ÏƒÎ· Ï‡ÏÎ®ÏƒÎ·Ï‚;';
                               explanation.innerHTML = 'Î•Î½Î·Î¼ÎµÏÏÏƒÏ„Îµ Î¼Î±Ï‚ Ï€ÏÏ‚ Î¼Ï€Î¿ÏÎ¿ÏÎ¼Îµ Î½Î± Î±Î½Î±Ï†ÎµÏÎ¸Î¿ÏÎ¼Îµ ÏƒÎµ ÎµÏƒÎ¬Ï‚ Î® ÏƒÏ„Î· ÏƒÏ…Î½ÎµÎ¹ÏƒÏ†Î¿ÏÎ¬ ÎºÎ±Î¹ Ï€ÏÏ‚ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î·Î¸Î¿ÏÎ½ Î® Î½Î± Î´Î¹Î±Î½ÎµÎ¼Î·Î¸Î¿ÏÎ½ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï€Î¿Ï… Î¼Î¿Î¹ÏÎ¬Î¶ÎµÏƒÏ„Îµ Î¼Î±Î¶Î¯ Î¼Î±Ï‚.';
                               break;
                           case 'anonymous':
                               explanation.innerHTML = 'Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÏ„Îµ/Î´Î¹Î±Î½ÎµÎ¯Î¼ÎµÏ„Îµ Ï„Î· ÏƒÏ…Î½ÎµÎ¹ÏƒÏ†Î¿ÏÎ¬ ÎµÎ»ÎµÏÎ¸ÎµÏÎ±. Î— Î±Ï€ÏŒÎ´Î¿ÏƒÎ· ÏƒÏ…Î½Î¬Î³ÎµÏ„Î±Î¹ Î±Î»Î»Î¬ ÎµÎ¯Î½Î±Î¹ Î­Î¼Î¼ÎµÏƒÎ·. Â«ÎˆÎ½Î±Ï‚ Ï€Î¿Î»Î¯Ï„Î·Ï‚ Ï„Î·Ï‚ ÎšÏ…Ï€ÏÎ¹Î±ÎºÎ®Ï‚ Î”Î·Î¼Î¿ÎºÏÎ±Ï„Î¯Î±Ï‚ ÏƒÏ…Î½Î­Î²Î±Î»Îµ Î¼Îµ Ï„Î·Î½ Ï€ÏÎ¿ÏƒÏ†Î¿ÏÎ¬ Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ â€¦Î§Â» Î‘ÎºÎ¿Î»Î¿Ï…Î¸ÎµÎ¯ Ï„Î¿ Ï€ÏÏŒÏ„Ï…Ï€Î¿ <a href="https://creativecommons.org/share-your-work/public-domain/cc0/" target="_blank">CC0 1.0 Universal (CC0 1.0) Public Domain Dedication</a>.';
                               break;
                       }
                    }
                    handleRightsChange(); // Call on page load if you want the text to be set even if user hasn't interacted yet
                </script>
                                    
                <hr style="margin-top: 1rem; margin-bottom: 1rem;">
                <span>Tools</span>

                <!-- File Uploading -->
               <div class="form-group">
                <!-- <label for="fileUpload">Attach files ğŸ“</label> -->
                <!-- <input type="file" id="fileUpload" name="fileUpload" multiple> -->
                <label for="fileUpload" class="file-upload-button">Î ÏÎ¿ÏƒÎ¸Î­ÏƒÏ„Îµ Î±ÏÏ‡ÎµÎ¯Î± ğŸ“</label>
                <input type="file" id="fileUpload" name="fileUpload" multiple>
            </div>


            <!-- Camera (Mobile) -->
            <div class="form-group" id="cameraCaptureGroup">
                <!-- <label for="photo">Î’Î³Î¬Î»Îµ Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ğŸ“· </label>
                <input type="file" id="photo" name="photo" accept="image/*" capture> -->
                <label for="photo" class="camera-button">Î’Î³Î¬Î»Îµ Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ğŸ“·</label>
                <input type="file" id="photo" name="photo" accept="image/*" capture>
            </div>
                
                <script>
                    window.onload = function() {
                        var cameraCaptureGroup = document.getElementById('cameraCaptureGroup');
                        var photoInput = document.getElementById('photo');
                    
                        function checkIfMobile() {
                            // Patterns for common mobile devices
                            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                        }
                    
                        if (!checkIfMobile()) {
                            // Disable the input and possibly hide if not on a mobile device
                            photoInput.disabled = true;
                            cameraCaptureGroup.style.display = 'none';  // Hide the group entirely if desired
                        }
                    };
                </script>
                
                <!-- Audio Recording -->
                <div class="form-group" id="audioControls">
                    <button id="recordButton" onclick="toggleRecording(true)">Î•Î³Î³ÏÎ±Ï†Î® Î®Ï‡Î¿Ï… ğŸ¤</button>
                    <button id="stopButton" onclick="toggleRecording(false)" disabled style="display:none;">â¹ï¸ Î¤Î­Î»Î¿Ï‚ ÎµÎ³Î³ÏÎ±Ï†Î®Ï‚</button>
                    <span id="timer" style="display:none; color: black;">00:00 / 02:00 ğŸ”´</span>
                </div>
 

                
            <script>
                let isRecording = false;
let recordingStartTime;
let recordInterval;
const maxRecordingTime = 120; // Maximum duration in seconds (2 minutes)

function toggleRecording(start) {
    const recordButton = document.getElementById('recordButton');
    const stopButton = document.getElementById('stopButton');
    const timer = document.getElementById('timer');

    if (start && !isRecording) {
        // Start recording
        isRecording = true;
        recordButton.style.display = 'none';
        stopButton.style.display = 'inline';
        stopButton.disabled = false;
        recordingStartTime = Date.now();
        timer.style.display = 'inline';
        recordInterval = setInterval(updateTimer, 1000);
    } else {
        // Stop recording
        isRecording = false;
        stopButton.style.display = 'none';
        recordButton.style.display = 'inline';
        recordButton.disabled = false;
        clearInterval(recordInterval);
        timer.style.display = 'none';
        timer.textContent = "00:00 / 02:00 ğŸ”´"; // Reset timer display
    }
}

function updateTimer() {
    const elapsedTime = Math.floor((Date.now() - recordingStartTime) / 1000);
    if (elapsedTime >= maxRecordingTime) {
        toggleRecording(false); // Stop recording if max time is reached
    } else {
        timer.textContent = formatTime(elapsedTime) + ' / 02:00 ğŸ”´';
    }
}

function formatTime(seconds) {
    let minutes = Math.floor(seconds / 60);
    seconds = seconds % 60;
    minutes = minutes.toString().padStart(2, '0');
    seconds = seconds.toString().padStart(2, '0');
    return minutes + ':' + seconds;
}

            // let isRecording = false;
            // let recordingStartTime;
            // let recordInterval;

            // function toggleRecording(start) {
            //     const recordButton = document.getElementById('recordButton');
            //     const stopButton = document.getElementById('stopButton');
            //     const timer = document.getElementById('timer');

            //     if (start && !isRecording) {
            //         // Start recording
            //         isRecording = true;
            //         recordButton.style.display = 'none';
            //         stopButton.style.display = 'inline';
            //         stopButton.disabled = false;
            //         recordingStartTime = Date.now();
            //         timer.style.display = 'inline';
            //         recordInterval = setInterval(updateTimer, 1000);
            //     } else {
            //         // Stop recording
            //         isRecording = false;
            //         stopButton.style.display = 'none';
            //         recordButton.style.display = 'inline';
            //         recordButton.disabled = false;
            //         clearInterval(recordInterval);
            //         timer.style.display = 'none';
            //     }
            // }

            // function updateTimer() {
            //     const now = Date.now();
            //     const diff = now - recordingStartTime;
            //     const seconds = Math.floor(diff / 1000) % 60;
            //     const minutes = Math.floor(diff / 60000);
            //     const formattedTime = `${padTime(minutes)}:${padTime(seconds)}`;
            //     document.getElementById('timer').textContent = formattedTime;
            // }

            // function padTime(num) {
            //     return num.toString().padStart(2, '0');
            // }

            </script>
            <hr style="margin-top: 1rem;">
                <!-- Displaying Uploaded/Recorded Files -->
                <div id="preview-attachments" style="margin-top:1.5rem">
                    <span>Attachments:</span>
                    <ul id="filesList"></ul> <!-- Files will be listed here -->
                    <hr>
                </div>
                <!-- Form submission button -->
                <button id="submitBtn" 
                    type="button" 
                    disabled 
                    onclick="submitForm()"
                    data-submit-text="Î¥Ï€Î¿Î²Î¿Î»Î®" 
                    data-required-text="Î£Ï…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ Ï„Î± Ï…Ï€Î¿Ï‡ÏÎµÏ‰Ï„Î¹ÎºÎ¬* Ï€ÎµÎ´Î¯Î± Î³Î¹Î± Ï…Ï€Î¿Î²Î¿Î»Î®.">>
                    Î¥Ï€Î¿Î²Î¿Î»Î®
                </button>
                <div id="loadingIndicator"></div> 
            </form>
        </article>
    </main>

    <script src="js/WebAudioRecorder.min.js"></script>
    <script src="js/clowder.js"></script>
    <script src="js/audio_app.js"></script>
    <script src="js/form.js"></script>
    <script src="js/upload_script.js"></script>
    <footer></footer>
</body>
</html>
